"use strict";var IMAGES_PATH="../assets/images";function q(e,n){return(n||document).querySelector(e)}function qa(e,n){return(n||document).querySelectorAll(e)}function collapse(e){e.classList.toggle("collapsed")}function formatAmount(e){return"$"+e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function getObjectValue(e,n){for(var a=e.split("."),o=n,t=0;t<a.length;t++){var r=a[t];if(r.match(/\[(\d+)\]/))var i=r.match(/\[(\d+)\]/),o=n[r.replace(i[0],"")][i[1]];else{if(void 0===o[r])throw"Can't find ".concat(e," in data.");o=o[r]}}return o}function handleFakeControlClick(e){e.preventDefault(),window.open("https://appbaz.onelink.me/897w/9b851f5d","_blank")}function setAddress(e,n){var a=[],o=n.calle,t=n.numeroExterior,r=n.colonia,i=n.codigoPostal,s=n.municipio,n=n.entidadFederativa;o&&a.push(o),t&&a.push(t),r&&a.push(r),i&&a.push(i),s&&a.push(s),n&&a.push(n),e.innerHTML=a.join(" ")}function setGallery(e,n){e.innerHTML="";for(var a=0;a<n.length;a++)e.innerHTML+='\n            <div class="swiper-slide">\n                <img src="'.concat(n[a].referencia,'" alt="Imagen ').concat(a+1,'">\n            </div>\n        ')}function setImage(e,n){e.setAttribute("src",n||"".concat(IMAGES_PATH,"/no-image.png"))}function setOpenStoreMessage(e){for(var n=["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],a=new Date,o=q(".store-details .collapsable__head span"),t=!1,r=0;r<e.length;r++)n.indexOf(e[r].dia)===a.getDay()&&0<=e[r].horas.indexOf(a.getHours())&&(t=!0);setScheduleFlag(o,t)}function setProductsList(e,n){e.innerHTML="";for(var a=0;a<n.length;a++){var o=n[a],t=o.id,r=o.nombre,i=o.imagenes,o=o.precio;e.innerHTML+='\n            <div class="product-card">\n                <a class="fake-control" href="product.html?id='.concat(t,'">\n                    <div class="image">\n                        ').concat(i&&0<i.length?'<img src="'.concat(i[0].referencia,'" alt="').concat(r,'" />'):'<img class="no-imagen" src="'.concat(IMAGES_PATH,'/icon-image.svg" alt="Sin imagen" />'),'\n                    </div>\n                    <div class="name"><strong>').concat(trimText(r,20),'</strong></div>\n                    <div class="price">').concat(formatAmount(o),"</div>\n                </a>\n            </div>\n        ")}}function setSchedule(e,n){var t=function(e){return e<13?"".concat(e,":00am"):24<=e?"00:00am":"".concat(e-12,":00pm")};e.innerHTML="";for(var a=0;a<n.length;a++){var o=n[a];e.innerHTML+="<div><span>".concat(o.dia," </span><span>").concat(function(e){var n,a=[],o=[];for(e.sort(function(e,n){return e-n}),n=1;n<e.length;n++)e[n]-e[n-1]==1?o.push(e[n-1]):(o.push(e[n-1]),a.push(o),o=[]);return o.push(e[n-1]),a.push(o),a.map(function(e){return 1<e.length?"".concat(t(e[0])," - ").concat(t(e[e.length-1])):t(e[0])}).join(", ")}(o.horas),"</span></div>")}}function setScheduleCollapsable(e,n){var a;n&&(a=q(".collapsable__head span",e),n=q(".schedule",e),e.classList.add("collapsable-disabled"),a.classList.remove("color-red"),a.classList.add("color-green"),a.innerHTML="Abierto 24/7",n.parentNode.removeChild(n))}function setScheduleFlag(e,n){n?(e.classList.remove("color-red"),e.classList.add("color-green"),e.innerText="Abierto"):(e.classList.remove("color-green"),e.classList.add("color-red"),e.innerText="Cerrado")}function setTags(e,n){e.innerHTML="";for(var a=0;a<n.length;a++)e.innerHTML+="<li>".concat(n[a].nombre,"</li>")}function setWorkZones(e,n){for(var a="",o=0;o<n.length;o++){for(var t=n[o],r="",i=0;i<t.municipios.length;i++)r+="<li>".concat(t.municipios[i].nombreMunicipio,"</li>");a+="\n            <div>".concat(n[o].nombreEntidadFederativa,"</div>\n            <ul>").concat(r,"</ul>\n        ")}e.innerHTML=a}function trimText(e,n){return e.length>n?e.substr(0,n)+"...":e}[].forEach.call(qa("[data-id]"),function(n){var a=n.dataset.id;try{var e=getObjectValue(a,data);"logo.referencia"===a?setImage(n,e):"calificacion"===a||"estrellas"===a?0===e||e.toFixed(1):"direccion"===a?setAddress(n,e):"horario.disponibilidad"===a?setScheduleCollapsable(n,e):"horario.dias"===a||"perfiles[0].horarios.dias"===a?n.closest(".collapsable")&&(setSchedule(n,e),setOpenStoreMessage(e)):"categoria.subcategorias"===a||"perfiles[0].areasExperiencia"===a?setTags(n,e):"productos"===a?setProductsList(n,e):"productos[0].imagenes"===a||"galeria"===a?setGallery(n,e):0<=a.indexOf("precio")?n.innerText=formatAmount(e):0<=a.indexOf("caracteristicas.color")?n.innerText=e.join(", "):0<=a.indexOf("zonasTrabajo")?setWorkZones(n,e):n.innerHTML=e}catch(e){console.log(e),"direccion"===a?setWorkZones(n,getObjectValue("zonasTrabajo",data)):n&&n.parentNode&&n.parentNode.removeChild(n)}});var collapsableItems=qa(".collapsable");if(0<collapsableItems.length)for(var _loop=function(e){q(".collapsable__head",collapsableItems[e]).addEventListener("click",function(){collapse(collapsableItems[e])})},i=0;i<collapsableItems.length;i++)_loop(i);var fakeControls=qa(".fake-control");if(0<fakeControls.length)for(var _i=0;_i<fakeControls.length;_i++)fakeControls[_i].addEventListener("click",handleFakeControlClick);var swiper=new Swiper(".swiper-container",{direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination"}});